<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta Rápida - Médico Virtual May Roga</title>
<link rel="stylesheet" href="/static/css/style.css">
<script src="https://js.stripe.com/v3/"></script>
<style>
  body { margin:0; font-family: Arial, sans-serif; background-color:#0077cc; color:white; }
  .container { max-width:600px; margin: auto; padding:20px; text-align:center; }
  button { background-color:#004f99; color:white; border:none; padding:10px 20px; margin:10px; cursor:pointer; font-size:16px; border-radius:6px; }
  textarea{ width:100%; height:120px; border-radius:6px; padding:10px; margin:10px 0; font-size:16px; }
  @media (max-width:768px){ .container{ width:100%; padding:10px; } textarea{ height:100px; } }
</style>
</head>
<body>
<div class="container">
  <h1>Consulta Rápida</h1>
  <p>45 segundos - $1 (solo orientación general)</p>
  <textarea id="consulta" placeholder="Escribe tu consulta..."></textarea><br>
  <button onclick="sendQuick()">Enviar</button>
  <button onclick="goBack()">← Volver</button>
  <div id="respuesta" style="margin-top:15px;"></div>
</div>

<script>
function goBack(){ window.location.href="/"; }

function sendQuick(){
  const consulta = document.getElementById('consulta').value;
  if(!consulta) return alert("Escribe tu consulta");
  const nickname = prompt("Ingresa tu apodo:");
  if(!nickname) return alert("Apodo obligatorio");

  fetch("/pay/create-session?nickname="+nickname+"&servicio=quick")
    .then(res=>res.json())
    .then(data=>{
      if(data.url){ window.location.href = data.url; }
      else alert("Error al crear sesión de pago");
    });
}
</script>
</body>
</html>
