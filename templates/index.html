<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Medico Virtual May Roga</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <h1>Asistente Virtual Médico</h1>
    <p>Medico Virtual May Roga — informativo. No sustituye consulta presencial.</p>

    <!-- Acceso con código secreto -->
    <div>
        <h3>Acceso por código (gratis)</h3>
        <label>Apodo (obligatorio):</label>
        <input type="text" id="free-apodo">
        <label>Código secreto:</label>
        <input type="password" id="free-code">
        <button onclick="accesoGratis()">Acceso directo</button>
        <p id="free-status"></p>
    </div>

    <!-- Acceso con pago -->
    <div>
        <h3>Acceso por pago (Stripe)</h3>
        <label>Apodo:</label>
        <input type="text" id="paid-apodo">
        <label>Selecciona servicio:</label>
        <select id="service-select">
            {% for key, s in services.items() %}
            <option value="{{ key }}">{{ s.name }} — ${{ s.price }}</option>
            {% endfor %}
        </select>
        <button onclick="pagarStripe()">Pagar con Stripe</button>
    </div>

    <!-- Chat -->
    <div id="chat-section" style="display:none;">
        <h3>Chat con Asistente</h3>
        <p>Apodo: <span id="chat-apodo"></span></p>
        <label>Tu mensaje:</label>
        <input type="text" id="chat-message">
        <button onclick="enviarMensaje()">Enviar</button>
        <button onclick="limpiarChat()">Limpiar chat</button>
        <div id="chat-log" style="border:1px solid #ccc; padding:10px; height:200px; overflow:auto;"></div>
    </div>

    <p>Consejo: pregunta con detalles (síntomas, tiempo, medicamentos actuales) para respuestas más útiles.</p>
    <footer>© May Roga LLC — Servicio informativo. Apodos obligatorios. Pagos por Stripe.</footer>

    <script src="/static/js/script.js"></script>
</body>
</html>
